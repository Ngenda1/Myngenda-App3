<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Myngenda - Customer Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary-color: #2ecc71;
      --primary-dark: #27ae60;
      --secondary-color: #3498db;
      --secondary-dark: #2980b9;
      --accent-color: #f39c12;
      --text-color: #333;
      --light-bg: #f8f9fa;
      --border-radius: 8px;
      --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      --transition: all 0.3s ease;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f5f5f5;
      color: var(--text-color);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    
    .navbar-brand {
      font-weight: bold;
      font-size: 1.5rem;
    }
    
    .navbar-brand span {
      color: var(--primary-color);
    }
    
    .sidebar {
      background-color: white;
      box-shadow: var(--box-shadow);
      height: calc(100vh - 56px);
      position: fixed;
      width: 250px;
      z-index: 100;
      transition: var(--transition);
      overflow-y: auto;
    }
    
    .sidebar-header {
      padding: 1.5rem 1rem;
      border-bottom: 1px solid #e9ecef;
    }
    
    .sidebar-header img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
      margin-right: 0.75rem;
    }
    
    .sidebar-header h5 {
      margin-bottom: 0;
      font-weight: 600;
    }
    
    .sidebar-header p {
      margin-bottom: 0;
      color: #6c757d;
      font-size: 0.875rem;
    }
    
    .nav-link {
      padding: 0.75rem 1rem;
      color: var(--text-color);
      border-radius: 0;
      transition: var(--transition);
    }
    
    .nav-link:hover, .nav-link.active {
      background-color: rgba(46, 204, 113, 0.1);
      color: var(--primary-color);
    }
    
    .nav-link i {
      margin-right: 0.75rem;
      width: 20px;
      text-align: center;
    }
    
    .main-content {
      margin-left: 250px;
      padding: 2rem;
      transition: var(--transition);
    }
    
    .card {
      border: none;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      transition: var(--transition);
      margin-bottom: 1.5rem;
    }
    
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
    }
    
    .card-header {
      background-color: white;
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
      font-weight: 600;
      padding: 1rem 1.25rem;
    }
    
    .card-header i {
      color: var(--primary-color);
      margin-right: 0.5rem;
    }
    
    .stats-card {
      padding: 1.5rem;
      text-align: center;
      height: 100%;
    }
    
    .stats-card i {
      font-size: 2.5rem;
      color: var(--primary-color);
      margin-bottom: 1rem;
    }
    
    .stats-card h3 {
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }
    
    .stats-card p {
      color: #6c757d;
      margin-bottom: 0;
    }
    
    .action-card {
      background-color: var(--primary-color);
      color: white;
      padding: 1.5rem;
      border-radius: var(--border-radius);
      margin-bottom: 1.5rem;
      transition: var(--transition);
    }
    
    .action-card:hover {
      background-color: var(--primary-dark);
      transform: translateY(-5px);
    }
    
    .action-card h4 {
      font-weight: 600;
      margin-bottom: 1rem;
    }
    
    .action-card p {
      margin-bottom: 1.5rem;
      opacity: 0.9;
    }
    
    .btn-light {
      background-color: white;
      color: var(--primary-color);
      font-weight: 500;
      padding: 0.5rem 1rem;
      border-radius: var(--border-radius);
      transition: var(--transition);
    }
    
    .btn-light:hover {
      background-color: #f8f9fa;
      transform: translateY(-2px);
    }
    
    .package-card {
      margin-bottom: 1rem;
      border-radius: var(--border-radius);
      overflow: hidden;
    }
    
    .package-card .card-body {
      padding: 1.25rem;
    }
    
    .package-status {
      padding: 0.25rem 0.5rem;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 500;
      text-transform: uppercase;
    }
    
    .status-pending {
      background-color: #ffeeba;
      color: #856404;
    }
    
    .status-transit {
      background-color: #b8daff;
      color: #004085;
    }
    
    .status-delivered {
      background-color: #c3e6cb;
      color: #155724;
    }
    
    .package-date {
      font-size: 0.875rem;
      color: #6c757d;
    }
    
    .package-eta {
      font-weight: 500;
    }
    
    .form-floating {
      margin-bottom: 1rem;
    }
    
    @media (max-width: 992px) {
      .sidebar {
        width: 100%;
        height: auto;
        position: relative;
      }
      
      .main-content {
        margin-left: 0;
        padding: 1.5rem;
      }
      
      .sidebar-nav {
        display: flex;
        flex-wrap: wrap;
      }
      
      .nav-link {
        padding: 0.5rem 1rem;
        margin-right: 0.5rem;
        margin-bottom: 0.5rem;
        border-radius: var(--border-radius);
      }
    }
    
    /* Quick Actions Section */
    .quick-actions {
      margin-bottom: 2rem;
    }
    
    .quick-action-item {
      background-color: white;
      border-radius: var(--border-radius);
      padding: 1.25rem;
      box-shadow: var(--box-shadow);
      text-align: center;
      transition: var(--transition);
      height: 100%;
    }
    
    .quick-action-item:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
    }
    
    .quick-action-icon {
      font-size: 2rem;
      color: var(--primary-color);
      margin-bottom: 1rem;
    }
    
    .quick-action-title {
      font-weight: 600;
      margin-bottom: 0.5rem;
    }
    
    .quick-action-description {
      color: #6c757d;
      font-size: 0.875rem;
      margin-bottom: 1rem;
    }
    
    /* Loading Spinner */
    .spinner-container {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 200px;
    }
    
    .spinner {
      width: 3rem;
      height: 3rem;
      color: var(--primary-color);
    }
    
    /* Package Item */
    .package-item {
      border-left: 4px solid var(--primary-color);
      background-color: white;
      border-radius: var(--border-radius);
      margin-bottom: 1rem;
      padding: 1rem;
      box-shadow: var(--box-shadow);
      transition: var(--transition);
    }
    
    .package-item:hover {
      transform: translateX(5px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
    }
    
    .package-item-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.5rem;
    }
    
    .package-item-name {
      font-weight: 600;
      font-size: 1.1rem;
      margin-bottom: 0;
    }
    
    .package-item-details {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-bottom: 0.5rem;
    }
    
    .package-item-detail {
      display: flex;
      align-items: center;
    }
    
    .package-item-detail i {
      color: var(--primary-color);
      margin-right: 0.5rem;
    }
    
    .package-add-form {
      display: none;
    }
    
    .package-add-form.active {
      display: block;
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
    <div class="container-fluid px-4">
      <a class="navbar-brand" href="/">
        <img src="https://raw.githubusercontent.com/yourusername/myngenda/main/assets/logo.png" alt="Myngenda Logo" height="35">
        Myngenda <span>Delivery Services</span>
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown">
              <i class="fas fa-user-circle me-1"></i>
              <span id="user-name">Customer</span>
            </a>
            <ul class="dropdown-menu dropdown-menu-end">
              <li><a class="dropdown-item" href="#"><i class="fas fa-user me-2"></i>Profile</a></li>
              <li><a class="dropdown-item" href="#"><i class="fas fa-cog me-2"></i>Settings</a></li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item" href="#" id="logout-btn"><i class="fas fa-sign-out-alt me-2"></i>Logout</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Sidebar -->
  <div class="sidebar">
    <div class="sidebar-header d-flex align-items-center">
      <img src="https://ui-avatars.com/api/?name=C&background=2ecc71&color=fff" alt="User Avatar" id="user-avatar">
      <div>
        <h5 id="sidebar-user-name">Customer</h5>
        <p id="user-role">Customer Account</p>
      </div>
    </div>
    <ul class="nav flex-column sidebar-nav">
      <li class="nav-item">
        <a class="nav-link active" href="#dashboard" data-section="dashboard-section">
          <i class="fas fa-home"></i>Dashboard
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#packages" data-section="packages-section">
          <i class="fas fa-box"></i>My Packages
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#new-package" data-section="new-package-section">
          <i class="fas fa-plus-circle"></i>New Package
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#tracking" data-section="tracking-section">
          <i class="fas fa-map-marker-alt"></i>Track Package
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#profile" data-section="profile-section">
          <i class="fas fa-user"></i>Profile
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#settings" data-section="settings-section">
          <i class="fas fa-cog"></i>Settings
        </a>
      </li>
      <li class="nav-item mt-4">
        <a class="nav-link text-danger" href="#" id="sidebar-logout-btn">
          <i class="fas fa-sign-out-alt"></i>Logout
        </a>
      </li>
    </ul>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Quick Actions Section -->
    <section class="quick-actions mb-4">
      <h4 class="mb-3">Quick Actions</h4>
      <div class="row g-3">
        <div class="col-md-4">
          <div class="quick-action-item">
            <div class="quick-action-icon">
              <i class="fas fa-plus-circle"></i>
            </div>
            <h5 class="quick-action-title">Send Package</h5>
            <p class="quick-action-description">Create a new package delivery request</p>
            <button class="btn btn-primary btn-sm quick-action-btn" data-action="new-package">Send Now</button>
          </div>
        </div>
        <div class="col-md-4">
          <div class="quick-action-item">
            <div class="quick-action-icon">
              <i class="fas fa-search"></i>
            </div>
            <h5 class="quick-action-title">Track Package</h5>
            <p class="quick-action-description">Check the status of your package</p>
            <button class="btn btn-primary btn-sm quick-action-btn" data-action="track-package">Track Now</button>
          </div>
        </div>
        <div class="col-md-4">
          <div class="quick-action-item">
            <div class="quick-action-icon">
              <i class="fas fa-history"></i>
            </div>
            <h5 class="quick-action-title">View History</h5>
            <p class="quick-action-description">Check your delivery history</p>
            <button class="btn btn-primary btn-sm quick-action-btn" data-action="view-history">View Now</button>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Dashboard Section -->
    <section id="dashboard-section" class="content-section active">
      <h3 class="mb-4">Dashboard</h3>
      
      <div class="row mb-4">
        <div class="col-md-4">
          <div class="card h-100">
            <div class="stats-card">
              <i class="fas fa-box"></i>
              <h3 id="total-packages-count">0</h3>
              <p>Total Packages</p>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card h-100">
            <div class="stats-card">
              <i class="fas fa-truck"></i>
              <h3 id="in-transit-count">0</h3>
              <p>In Transit</p>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card h-100">
            <div class="stats-card">
              <i class="fas fa-check-circle"></i>
              <h3 id="delivered-count">0</h3>
              <p>Delivered</p>
            </div>
          </div>
        </div>
      </div>
      
      <div class="row">
        <div class="col-lg-8">
          <div class="card">
            <div class="card-header">
              <i class="fas fa-box"></i> Recent Packages
            </div>
            <div class="card-body">
              <div id="recent-packages-container">
                <div class="spinner-container">
                  <div class="spinner-border spinner" role="status">
                    <span class="visually-hidden">Loading...</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-4">
          <div class="action-card">
            <h4>Send a Package</h4>
            <p>Create a new delivery request in just a few clicks.</p>
            <button class="btn btn-light quick-action-btn" data-action="new-package">
              <i class="fas fa-plus me-1"></i> New Package
            </button>
          </div>
          
          <div class="card">
            <div class="card-header">
              <i class="fas fa-bell"></i> Notifications
            </div>
            <div class="card-body">
              <div class="d-flex align-items-center mb-3">
                <div class="me-3">
                  <i class="fas fa-truck-loading text-primary fs-4"></i>
                </div>
                <div>
                  <p class="mb-0 fw-bold">Package Update</p>
                  <p class="mb-0 small text-muted">Your package has been picked up.</p>
                </div>
              </div>
              <div class="d-flex align-items-center mb-3">
                <div class="me-3">
                  <i class="fas fa-map-marker-alt text-danger fs-4"></i>
                </div>
                <div>
                  <p class="mb-0 fw-bold">Delivery Update</p>
                  <p class="mb-0 small text-muted">Package #12345 is out for delivery.</p>
                </div>
              </div>
              <div class="d-flex align-items-center">
                <div class="me-3">
                  <i class="fas fa-percentage text-success fs-4"></i>
                </div>
                <div>
                  <p class="mb-0 fw-bold">Special Offer</p>
                  <p class="mb-0 small text-muted">20% off your next delivery!</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Packages Section -->
    <section id="packages-section" class="content-section">
      <h3 class="mb-4">My Packages</h3>
      
      <div class="card mb-4">
        <div class="card-body">
          <div class="row">
            <div class="col-md-6">
              <div class="input-group">
                <input type="text" class="form-control" placeholder="Search packages..." id="package-search">
                <button class="btn btn-outline-secondary" type="button">
                  <i class="fas fa-search"></i>
                </button>
              </div>
            </div>
            <div class="col-md-3">
              <select class="form-select" id="package-status-filter">
                <option value="all">All Status</option>
                <option value="pending">Pending</option>
                <option value="transit">In Transit</option>
                <option value="delivered">Delivered</option>
              </select>
            </div>
            <div class="col-md-3">
              <select class="form-select" id="package-date-filter">
                <option value="all">All Time</option>
                <option value="today">Today</option>
                <option value="week">This Week</option>
                <option value="month">This Month</option>
              </select>
            </div>
          </div>
        </div>
      </div>
      
      <div id="packages-list-container">
        <div class="spinner-container">
          <div class="spinner-border spinner" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
      </div>
    </section>
    
    <!-- New Package Section -->
    <section id="new-package-section" class="content-section">
      <h3 class="mb-4">Send a Package</h3>
      
      <div class="card">
        <div class="card-body">
          <form id="new-package-form">
            <div class="row">
              <div class="col-md-6">
                <div class="mb-3">
                  <label for="package-name" class="form-label">Package Name/Description</label>
                  <input type="text" class="form-control" id="package-name" name="name" required>
                </div>
              </div>
              <div class="col-md-6">
                <div class="mb-3">
                  <label for="package-type" class="form-label">Package Type</label>
                  <select class="form-select" id="package-type" name="type">
                    <option value="document">Document</option>
                    <option value="small">Small Package</option>
                    <option value="medium">Medium Package</option>
                    <option value="large">Large Package</option>
                    <option value="extra_large">Extra Large Package</option>
                  </select>
                </div>
              </div>
            </div>
            
            <div class="row">
              <div class="col-md-6">
                <div class="mb-3">
                  <label for="pickup-location" class="form-label">Pickup Location</label>
                  <input type="text" class="form-control" id="pickup-location" name="from" required>
                </div>
              </div>
              <div class="col-md-6">
                <div class="mb-3">
                  <label for="delivery-location" class="form-label">Delivery Location</label>
                  <input type="text" class="form-control" id="delivery-location" name="to" required>
                </div>
              </div>
            </div>
            
            <div class="row">
              <div class="col-12">
                <div class="mb-3">
                  <label for="package-notes" class="form-label">Special Instructions (Optional)</label>
                  <textarea class="form-control" id="package-notes" name="notes" rows="3"></textarea>
                </div>
              </div>
            </div>
            
            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
              <button type="button" class="btn btn-outline-secondary me-md-2" id="reset-package-form">Reset</button>
              <button type="submit" class="btn btn-primary">Submit Request</button>
            </div>
          </form>
        </div>
      </div>
    </section>
    
    <!-- Tracking Section -->
    <section id="tracking-section" class="content-section">
      <h3 class="mb-4">Track Your Package</h3>
      
      <div class="card mb-4">
        <div class="card-body">
          <form id="tracking-form">
            <div class="row">
              <div class="col-md-8">
                <div class="mb-3 mb-md-0">
                  <label for="tracking-id" class="form-label">Tracking Number</label>
                  <input type="text" class="form-control" id="tracking-id" placeholder="Enter tracking number">
                </div>
              </div>
              <div class="col-md-4 d-flex align-items-end">
                <button type="submit" class="btn btn-primary w-100">
                  <i class="fas fa-search me-1"></i> Track
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
      
      <div id="tracking-result" style="display: none;">
        <div class="card">
          <div class="card-header">
            <i class="fas fa-box"></i> Package Information
          </div>
          <div class="card-body">
            <div class="row mb-4">
              <div class="col-md-6">
                <h5 id="tracking-package-name">Package Name</h5>
                <p class="mb-1"><strong>Tracking ID:</strong> <span id="tracking-id-display">12345</span></p>
                <p class="mb-1"><strong>Status:</strong> <span class="package-status status-transit" id="tracking-status">In Transit</span></p>
                <p class="mb-1"><strong>ETA:</strong> <span id="tracking-eta">Jun 10, 2023</span></p>
              </div>
              <div class="col-md-6">
                <p class="mb-1"><strong>From:</strong> <span id="tracking-from">Lagos, Nigeria</span></p>
                <p class="mb-1"><strong>To:</strong> <span id="tracking-to">Accra, Ghana</span></p>
                <p class="mb-1"><strong>Date Created:</strong> <span id="tracking-date">Jun 5, 2023</span></p>
              </div>
            </div>
            
            <h6 class="mb-3">Delivery Progress</h6>
            <div class="position-relative mb-4">
              <div class="progress" style="height: 3px;">
                <div class="progress-bar bg-success" role="progressbar" id="tracking-progress" style="width: 50%"></div>
              </div>
              <div class="position-absolute top-0 start-0 translate-middle">
                <div class="bg-success rounded-circle d-flex align-items-center justify-content-center" style="width: 30px; height: 30px;">
                  <i class="fas fa-check text-white small"></i>
                </div>
              </div>
              <div class="position-absolute top-0 start-50 translate-middle">
                <div class="bg-success rounded-circle d-flex align-items-center justify-content-center" style="width: 30px; height: 30px;">
                  <i class="fas fa-check text-white small"></i>
                </div>
              </div>
              <div class="position-absolute top-0 start-100 translate-middle">
                <div class="bg-light border border-success rounded-circle d-flex align-items-center justify-content-center" style="width: 30px; height: 30px;">
                  <i class="fas fa-truck text-muted small"></i>
                </div>
              </div>
            </div>
            <div class="row text-center">
              <div class="col-4">
                <p class="mb-0 small">Order Placed</p>
              </div>
              <div class="col-4">
                <p class="mb-0 small">In Transit</p>
              </div>
              <div class="col-4">
                <p class="mb-0 small">Delivered</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Profile Section -->
    <section id="profile-section" class="content-section">
      <h3 class="mb-4">My Profile</h3>
      
      <div class="card">
        <div class="card-body">
          <div class="row">
            <div class="col-md-4 text-center mb-4 mb-md-0">
              <img src="https://ui-avatars.com/api/?name=C&background=2ecc71&color=fff&size=200" alt="User Avatar" class="img-fluid rounded-circle mb-3" style="width: 150px; height: 150px;">
              <h5 id="profile-name">Customer Name</h5>
              <p class="text-muted mb-2" id="profile-email">customer@example.com</p>
              <p><span class="badge bg-success" id="profile-role">Customer</span></p>
              <button class="btn btn-sm btn-outline-primary">
                <i class="fas fa-camera me-1"></i> Change Photo
              </button>
            </div>
            <div class="col-md-8">
              <form id="profile-form">
                <div class="mb-3">
                  <label for="profile-fullname" class="form-label">Full Name</label>
                  <input type="text" class="form-control" id="profile-fullname" value="Customer Name">
                </div>
                <div class="mb-3">
                  <label for="profile-email-input" class="form-label">Email Address</label>
                  <input type="email" class="form-control" id="profile-email-input" value="customer@example.com">
                </div>
                <div class="mb-3">
                  <label for="profile-phone" class="form-label">Phone Number</label>
                  <input type="tel" class="form-control" id="profile-phone" placeholder="Enter phone number">
                </div>
                <div class="mb-3">
                  <label for="profile-address" class="form-label">Default Address</label>
                  <textarea class="form-control" id="profile-address" rows="3" placeholder="Enter your address"></textarea>
                </div>
                <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                  <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save me-1"></i> Save Changes
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Settings Section -->
    <section id="settings-section" class="content-section">
      <h3 class="mb-4">Settings</h3>
      
      <div class="card mb-4">
        <div class="card-header">
          <i class="fas fa-bell"></i> Notification Settings
        </div>
        <div class="card-body">
          <div class="form-check form-switch mb-3">
            <input class="form-check-input" type="checkbox" id="email-notifications" checked>
            <label class="form-check-label" for="email-notifications">Email Notifications</label>
            <p class="text-muted small">Receive package updates via email</p>
          </div>
          <div class="form-check form-switch mb-3">
            <input class="form-check-input" type="checkbox" id="sms-notifications">
            <label class="form-check-label" for="sms-notifications">SMS Notifications</label>
            <p class="text-muted small">Receive package updates via SMS</p>
          </div>
          <div class="form-check form-switch mb-3">
            <input class="form-check-input" type="checkbox" id="marketing-emails">
            <label class="form-check-label" for="marketing-emails">Marketing Emails</label>
            <p class="text-muted small">Receive promotions and special offers</p>
          </div>
        </div>
      </div>
      
      <div class="card mb-4">
        <div class="card-header">
          <i class="fas fa-lock"></i> Password Settings
        </div>
        <div class="card-body">
          <form id="password-form">
            <div class="mb-3">
              <label for="current-password" class="form-label">Current Password</label>
              <input type="password" class="form-control" id="current-password" required>
            </div>
            <div class="mb-3">
              <label for="new-password" class="form-label">New Password</label>
              <input type="password" class="form-control" id="new-password" required>
            </div>
            <div class="mb-3">
              <label for="confirm-password" class="form-label">Confirm New Password</label>
              <input type="password" class="form-control" id="confirm-password" required>
            </div>
            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
              <button type="submit" class="btn btn-primary">
                <i class="fas fa-key me-1"></i> Change Password
              </button>
            </div>
          </form>
        </div>
      </div>
      
      <div class="card">
        <div class="card-header bg-danger text-white">
          <i class="fas fa-exclamation-triangle"></i> Danger Zone
        </div>
        <div class="card-body">
          <p>Permanently delete your account and all associated data.</p>
          <button type="button" class="btn btn-outline-danger" data-bs-toggle="modal" data-bs-target="#deleteAccountModal">
            <i class="fas fa-trash-alt me-1"></i> Delete Account
          </button>
        </div>
      </div>
    </section>
  </div>

  <!-- Delete Account Modal -->
  <div class="modal fade" id="deleteAccountModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Delete Account</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p>Are you sure you want to delete your account? This action cannot be undone and all your data will be permanently lost.</p>
          <div class="mb-3">
            <label for="delete-confirm" class="form-label">Type "DELETE" to confirm</label>
            <input type="text" class="form-control" id="delete-confirm">
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-danger" id="confirm-delete-btn" disabled>Delete Account</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  <script src="auth-connector-enhanced.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Check if user is authenticated
      if (!AuthConnector.isAuthenticated()) {
        window.location.href = '/standalone-auth-enhanced.html';
        return;
      }
      
      // Get current user
      const user = AuthConnector.getCurrentUser();
      
      // Verify this is a customer dashboard
      if (user.role !== 'customer') {
        AuthConnector.redirectToDashboard();
        return;
      }
      
      // Update user information in UI
      document.getElementById('user-name').textContent = user.name || 'Customer';
      document.getElementById('sidebar-user-name').textContent = user.name || 'Customer';
      document.getElementById('profile-name').textContent = user.name || 'Customer';
      document.getElementById('profile-email').textContent = user.email;
      document.getElementById('profile-fullname').value = user.name || '';
      document.getElementById('profile-email-input').value = user.email || '';
      
      // Update user avatar if available
      if (user.profileImageUrl) {
        document.getElementById('user-avatar').src = user.profileImageUrl;
      } else {
        // Create avatar from name or email
        const nameInitial = user.name ? user.name.charAt(0) : user.email.charAt(0);
        document.getElementById('user-avatar').src = `https://ui-avatars.com/api/?name=${nameInitial}&background=2ecc71&color=fff`;
      }
      
      // Section navigation
      const navLinks = document.querySelectorAll('.nav-link[data-section]');
      const contentSections = document.querySelectorAll('.content-section');
      
      navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          
          // Remove active class from all links and sections
          navLinks.forEach(l => l.classList.remove('active'));
          contentSections.forEach(s => s.classList.remove('active'));
          
          // Add active class to clicked link
          this.classList.add('active');
          
          // Show corresponding section
          const sectionId = this.getAttribute('data-section');
          document.getElementById(sectionId).classList.add('active');
        });
      });
      
      // Quick Action buttons
      const quickActionButtons = document.querySelectorAll('.quick-action-btn');
      
      quickActionButtons.forEach(button => {
        button.addEventListener('click', function() {
          const action = this.getAttribute('data-action');
          
          switch (action) {
            case 'new-package':
              // Show new package section
              navLinks.forEach(l => l.classList.remove('active'));
              contentSections.forEach(s => s.classList.remove('active'));
              document.querySelector('.nav-link[data-section="new-package-section"]').classList.add('active');
              document.getElementById('new-package-section').classList.add('active');
              break;
              
            case 'track-package':
              // Show tracking section
              navLinks.forEach(l => l.classList.remove('active'));
              contentSections.forEach(s => s.classList.remove('active'));
              document.querySelector('.nav-link[data-section="tracking-section"]').classList.add('active');
              document.getElementById('tracking-section').classList.add('active');
              break;
              
            case 'view-history':
              // Show packages section
              navLinks.forEach(l => l.classList.remove('active'));
              contentSections.forEach(s => s.classList.remove('active'));
              document.querySelector('.nav-link[data-section="packages-section"]').classList.add('active');
              document.getElementById('packages-section').classList.add('active');
              break;
          }
        });
      });
      
      // Logout functionality
      const logoutButtons = document.querySelectorAll('#logout-btn, #sidebar-logout-btn');
      
      logoutButtons.forEach(button => {
        button.addEventListener('click', async function(e) {
          e.preventDefault();
          
          try {
            await AuthConnector.logout();
            window.location.href = '/standalone-auth-enhanced.html';
          } catch (error) {
            console.error('Logout error:', error);
            alert('An error occurred during logout. Please try again.');
          }
        });
      });
      
      // Delete account confirmation
      const deleteConfirmInput = document.getElementById('delete-confirm');
      const confirmDeleteBtn = document.getElementById('confirm-delete-btn');
      
      deleteConfirmInput.addEventListener('input', function() {
        confirmDeleteBtn.disabled = this.value !== 'DELETE';
      });
      
      // New package form submission
      const newPackageForm = document.getElementById('new-package-form');
      
      newPackageForm.addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const packageData = {
          name: document.getElementById('package-name').value,
          from: document.getElementById('pickup-location').value,
          to: document.getElementById('delivery-location').value,
          // Additional fields as needed
        };
        
        try {
          // Show loading state
          const submitBtn = this.querySelector('button[type="submit"]');
          const originalBtnText = submitBtn.innerHTML;
          submitBtn.disabled = true;
          submitBtn.innerHTML = '<span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>Processing...';
          
          // Send API request
          const response = await AuthConnector.apiRequest('/packages', {
            method: 'POST',
            body: JSON.stringify(packageData)
          });
          
          // Reset button state
          submitBtn.disabled = false;
          submitBtn.innerHTML = originalBtnText;
          
          if (response.success) {
            // Show success message
            alert('Package request submitted successfully!');
            
            // Reset form
            newPackageForm.reset();
            
            // Navigate to packages section to see the new package
            document.querySelector('.nav-link[data-section="packages-section"]').click();
            
            // Refresh packages list
            fetchPackages();
          } else {
            alert(response.data.message || 'Failed to create package. Please try again.');
          }
        } catch (error) {
          console.error('Create package error:', error);
          alert('An error occurred. Please try again.');
        }
      });
      
      // Reset package form
      const resetPackageFormBtn = document.getElementById('reset-package-form');
      
      resetPackageFormBtn.addEventListener('click', function() {
        newPackageForm.reset();
      });
      
      // Tracking form submission
      const trackingForm = document.getElementById('tracking-form');
      const trackingResult = document.getElementById('tracking-result');
      
      trackingForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const trackingId = document.getElementById('tracking-id').value;
        
        if (!trackingId) {
          alert('Please enter a tracking number');
          return;
        }
        
        // For demo purposes, show tracking result with sample data
        document.getElementById('tracking-id-display').textContent = trackingId;
        document.getElementById('tracking-package-name').textContent = 'Sample Package';
        document.getElementById('tracking-from').textContent = 'Lagos, Nigeria';
        document.getElementById('tracking-to').textContent = 'Accra, Ghana';
        document.getElementById('tracking-status').textContent = 'In Transit';
        document.getElementById('tracking-eta').textContent = 'June 10, 2023';
        document.getElementById('tracking-date').textContent = 'June 5, 2023';
        
        // Show tracking result
        trackingResult.style.display = 'block';
      });
      
      // Fetch packages from API
      async function fetchPackages() {
        try {
          // Show loading spinner
          document.getElementById('packages-list-container').innerHTML = `
            <div class="spinner-container">
              <div class="spinner-border spinner" role="status">
                <span class="visually-hidden">Loading...</span>
              </div>
            </div>
          `;
          
          document.getElementById('recent-packages-container').innerHTML = `
            <div class="spinner-container">
              <div class="spinner-border spinner" role="status">
                <span class="visually-hidden">Loading...</span>
              </div>
            </div>
          `;
          
          // Fetch packages
          const response = await AuthConnector.apiRequest('/packages');
          
          if (response.success && response.data.success) {
            const packages = response.data.packages || [];
            
            // Update package counts
            document.getElementById('total-packages-count').textContent = packages.length;
            document.getElementById('in-transit-count').textContent = packages.filter(p => p.status === 'transit').length;
            document.getElementById('delivered-count').textContent = packages.filter(p => p.status === 'delivered').length;
            
            // Render packages list
            renderPackagesList(packages);
            
            // Render recent packages (up to 5)
            renderRecentPackages(packages.slice(0, 5));
          } else {
            document.getElementById('packages-list-container').innerHTML = `
              <div class="alert alert-warning">
                <i class="fas fa-exclamation-triangle me-2"></i>
                Failed to load packages. Please try again.
              </div>
            `;
            
            document.getElementById('recent-packages-container').innerHTML = `
              <div class="alert alert-warning">
                <i class="fas fa-exclamation-triangle me-2"></i>
                Failed to load recent packages. Please try again.
              </div>
            `;
          }
        } catch (error) {
          console.error('Fetch packages error:', error);
          document.getElementById('packages-list-container').innerHTML = `
            <div class="alert alert-danger">
              <i class="fas fa-exclamation-circle me-2"></i>
              An error occurred. Please try again.
            </div>
          `;
          
          document.getElementById('recent-packages-container').innerHTML = `
            <div class="alert alert-danger">
              <i class="fas fa-exclamation-circle me-2"></i>
              An error occurred. Please try again.
            </div>
          `;
        }
      }
      
      // Render packages list
      function renderPackagesList(packages) {
        if (packages.length === 0) {
          document.getElementById('packages-list-container').innerHTML = `
            <div class="alert alert-info">
              <i class="fas fa-info-circle me-2"></i>
              You don't have any packages yet. Create a new package to get started.
            </div>
          `;
          return;
        }
        
        let html = '';
        
        packages.forEach(pkg => {
          let statusClass = '';
          switch (pkg.status) {
            case 'pending':
              statusClass = 'status-pending';
              break;
            case 'transit':
              statusClass = 'status-transit';
              break;
            case 'delivered':
              statusClass = 'status-delivered';
              break;
          }
          
          html += `
            <div class="package-item">
              <div class="package-item-header">
                <h5 class="package-item-name">${pkg.name}</h5>
                <span class="package-status ${statusClass}">${pkg.status}</span>
              </div>
              <div class="package-item-details">
                <div class="package-item-detail">
                  <i class="fas fa-map-marker-alt"></i>
                  <span>From: ${pkg.from}</span>
                </div>
                <div class="package-item-detail">
                  <i class="fas fa-map-marker"></i>
                  <span>To: ${pkg.to}</span>
                </div>
                <div class="package-item-detail">
                  <i class="fas fa-calendar-alt"></i>
                  <span>${pkg.date || 'N/A'}</span>
                </div>
                <div class="package-item-detail">
                  <i class="fas fa-clock"></i>
                  <span>ETA: ${pkg.eta || 'Calculating...'}</span>
                </div>
              </div>
              <div class="mt-2">
                <button class="btn btn-sm btn-outline-primary track-package-btn" data-id="${pkg.id}">
                  <i class="fas fa-search me-1"></i> Track
                </button>
              </div>
            </div>
          `;
        });
        
        document.getElementById('packages-list-container').innerHTML = html;
        
        // Add event listeners to track buttons
        document.querySelectorAll('.track-package-btn').forEach(btn => {
          btn.addEventListener('click', function() {
            const packageId = this.getAttribute('data-id');
            
            // Navigate to tracking section
            document.querySelector('.nav-link[data-section="tracking-section"]').click();
            
            // Fill tracking ID
            document.getElementById('tracking-id').value = packageId;
            
            // Submit tracking form
            document.getElementById('tracking-form').dispatchEvent(new Event('submit'));
          });
        });
      }
      
      // Render recent packages
      function renderRecentPackages(packages) {
        if (packages.length === 0) {
          document.getElementById('recent-packages-container').innerHTML = `
            <div class="alert alert-info">
              <i class="fas fa-info-circle me-2"></i>
              You don't have any recent packages.
            </div>
          `;
          return;
        }
        
        let html = '';
        
        packages.forEach(pkg => {
          let statusClass = '';
          switch (pkg.status) {
            case 'pending':
              statusClass = 'status-pending';
              break;
            case 'transit':
              statusClass = 'status-transit';
              break;
            case 'delivered':
              statusClass = 'status-delivered';
              break;
          }
          
          html += `
            <div class="package-card card mb-3">
              <div class="card-body">
                <div class="d-flex justify-content-between align-items-center mb-2">
                  <h5 class="card-title mb-0">${pkg.name}</h5>
                  <span class="package-status ${statusClass}">${pkg.status}</span>
                </div>
                <p class="card-text mb-1">
                  <i class="fas fa-map-marker-alt text-primary me-2"></i>
                  <span>From: ${pkg.from}</span>
                </p>
                <p class="card-text mb-1">
                  <i class="fas fa-map-marker text-danger me-2"></i>
                  <span>To: ${pkg.to}</span>
                </p>
                <div class="d-flex justify-content-between align-items-center mt-3">
                  <span class="package-date">
                    <i class="fas fa-calendar-alt me-1"></i>
                    ${pkg.date || 'N/A'}
                  </span>
                  <span class="package-eta">
                    <i class="fas fa-clock me-1"></i>
                    ETA: ${pkg.eta || 'Calculating...'}
                  </span>
                </div>
              </div>
            </div>
          `;
        });
        
        document.getElementById('recent-packages-container').innerHTML = html;
      }
      
      // Fetch packages on page load
      fetchPackages();
      
      // Also fetch current user from API to get latest data
      async function fetchCurrentUser() {
        try {
          const result = await AuthConnector.fetchCurrentUser();
          
          if (result.success) {
            // Update UI with latest user data
            document.getElementById('user-name').textContent = result.user.name || 'Customer';
            document.getElementById('sidebar-user-name').textContent = result.user.name || 'Customer';
            document.getElementById('profile-name').textContent = result.user.name || 'Customer';
            document.getElementById('profile-email').textContent = result.user.email;
            document.getElementById('profile-fullname').value = result.user.name || '';
            document.getElementById('profile-email-input').value = result.user.email || '';
            
            // Update avatar if available
            if (result.user.profileImageUrl) {
              document.getElementById('user-avatar').src = result.user.profileImageUrl;
            }
          }
        } catch (error) {
          console.error('Fetch current user error:', error);
        }
      }
      
      // Fetch current user
      fetchCurrentUser();
    });
  </script>
</body>
</html>